$ENTRY GO {
    = <Prout 'Refal-5 Source Beautifier'>
      <Prout '    source-file : ' <Arg 1>>      
      <Prout '----------------/'>      
      '/*' 
      CAR_RET
      ' * This program was produced by decompiler from assembler source.'
      CAR_RET
      ' * (C) 2000 Serge Skorobogatoff'
      CAR_RET
      ' */'
      CAR_RET CAR_RET
      <Open 'r' 1 <Arg 1>>      
      <PRINT <REMOVE_COMMENTS <LOADFILE 1>>>
    };

LOADFILE {
    s.1 = <LOADFILE2 s.1 <Get s.1>>;
    };

LOADFILE2 {
    s.1 0 = ;
    s.1 e.2 0 = e.2;
    s.1 e.2 = e.2 CAR_RET <LOADFILE s.1>;
    };
    
PRINT {
     = ;
    e.2 CAR_RET e.3 = <Prout e.2> <PRINT e.3>;
    e.2 = <Prout e.2>;
    };

REMOVE_COMMENTS {
    e.1 = <REMOVE_COMMENTS2 CAR_RET e.1 CAR_RET>;
    };

REMOVE_COMMENTS2 {
    CAR_RET '*' e.1 CAR_RET e.2 = <REMOVE_COMMENTS2 CAR_RET e.2>;
    '/*' e.1 '*/' e.2 = <REMOVE_COMMENTS2 e.2>;
    "'" e.1 "'" e.2 = "'" e.1 "'" <REMOVE_COMMENTS2 e.2>;
    '"' e.1 '"' e.2 = '"' e.1 '"' <REMOVE_COMMENTS2 e.2>;
    CAR_RET e.1 = CAR_RET <REMOVE_COMMENTS2 e.1>;
    '	' e.1 = <REMOVE_COMMENTS2 ' ' e.1>;
    s.1 e.2 = s.1 <REMOVE_COMMENTS2 e.2>;
    = ;
    };
